# SMTP

Simple Mail Transfer Protocol - used for sending emails in an IP network.

- Accepts connection requests on port 25 by default

---

## Interacting with SMTP

To interact with the SMTP server, we can use the `telnet` tool to initialize a TCP connection:

```bash
telnet 10.129.14.128 25
```

## VRFY Command

Can be used to enumerate existing users on the system (doesn't always work depending on how the SMTP server is configured).

```text
$ telnet 10.129.14.128 25

Trying 10.129.14.128...
Connected to 10.129.14.128.
Escape character is '^]'.
220 ESMTP Server 

VRFY root

252 2.0.0 root


VRFY cry0l1t3

252 2.0.0 cry0l1t3
```

## Nmap Enumeration

```bash
sudo nmap 10.129.14.128 -sC -sV -p25
```

```bash
sudo nmap 10.129.14.128 -p25 --script smtp-open-relay -v
```

### Enumerate SMTP Users

```bash
nmap -p 25 --script smtp-enum-users 10.129.148.138
```

## User Enumeration with smtp-user-enum

```bash
smtp-user-enum -M VRFY -U footprinting-wordlist.txt -t 10.129.148.138 -w 15 -v
```

---

See also: [[8. DNS]], [[10. IMAP POP3]]
