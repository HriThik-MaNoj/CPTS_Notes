![[2025-12-17_06-58.png]]
# Enumeration

- Nmap scan
```shell-session
nmap -sV --open 10.129.200.170
# performs a service version enumeration of the ports.
```

![[Pasted image 20251217070408.png]]

- The nmap scan revealed 2 open ports, which are ssh and http. We were also able to find that `Apache httpd 2.4.18` is running on the http port.
- Let's try to find what is running on that, for that lets try to open the website in our browser.
![[Pasted image 20251217070642.png]]
- Oh there's nothing here.. let us check the source for this page.
- we can see an interesting comment here : 
![[Pasted image 20251217070817.png]]
- let us go to that directory and see
![[Pasted image 20251217071019.png]]
-  I tried clicking on all the links here... no luck! :) 
- So I moved on to checking the source code for this page and fond something interesting. I saw some other directories mentioned in the source code : 
![[Pasted image 20251217071325.png]]

- And when I opened that directory and went back to it's parent directory I found some more directories : 
![[Pasted image 20251217072707.png]]

- I went through all these directories and couldn't find anything interesting..
- So I decided to enumerate again and see if there are any other directories within the `/nibbleblog/ `directory
- So I ran gobuster again with the command : 
```
gobuster dir -u http://10.129.200.170/nibbleblog/ -w /usr/share/seclists/Discovery/Web-Content/common.txt
```

**Output**

![[Pasted image 20251217073047.png]]

- let's check the directories one by one..
- Looking at the `README` file, we can see that they are running nibble blog version `v4.0.3`  
![[Pasted image 20251217074500.png]]

- Doing a bit of research on that particular version gave us a lot of information 
![[Pasted image 20251217074758.png]]
- We need the admin credentials.. The AI already revealed that (fetched it from someone's writeup lol)
- we can try to find it ourself..
- Found an interesting file called users.xml
![[Pasted image 20251217075619.png]]

- And... inside that we got our username as `admin`
![[Pasted image 20251217075730.png]]

- we still don't have the password, upon research we found that there is no default password and the password is set during the setup.
- Bruteforce protection is also implemented, so we're not going that route.
- After a bit of guessing.. tried the password `nibbles` and it worked !! And now we have the admin credentials.
- Let's try to exploit it using metasploit
- upon searching in msfconsole we got this : 
- ![[Pasted image 20251217080415.png]]
- we'll set the required options like this : 
![[Pasted image 20251217082052.png]]
and run the exploit.
- Exploit ran succesfully and now we need to run the shell command to get a shell and then we need to upgrade the tty to a proper shell refer to [[2. Upgrading TTY]] for additional details regarding the methods to achieve that.
- For this box,we're trying to spawn a bash shell using python, I tried python2 but it was not installed so using python3 instead.

Got a bash shell now :
![[Pasted image 20251217082642.png]]

## Privilege escalation

- let's run sudo -l to list the allowed commands for the current user nibbler on the host.
![[Pasted image 20251217083100.png]]
- we can run /home/nibbler/personal/stuff/monitor.sh without password as root.
- I checked and this file doesn't exist. so lets create it and make it run a bash shell
![[Pasted image 20251217083409.png]]
- now lets try running it to achieve root.
![[Pasted image 20251217084009.png]]
- we can also do this manually without using metasploit.. refer to hackthebox writeups for that.