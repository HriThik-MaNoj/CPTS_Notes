# Host and Port Scanning

After we find out that our target is alive, we want to get a more accurate picture of the system. This includes:

1. Open ports
2. Service Versions
3. Information that the services provided
4. Operating System

---

## Port States

| State | Description |
|-------|-------------|
| `open` | Connection to scanned port has been established |
| `closed` | Received back packet contains an `RST` flag |
| `filtered` | Nmap cannot correctly identify whether the scanned port is open or closed. Either no response received or error code from the target |
| `unfiltered` | Only occurs during `TCP-ACK` scan. Port is accessible but cannot determine whether it's open or closed |
| `open\|filtered` | No response for a specific port, firewall or packet filter may protect the port |
| `closed\|filtered` | Occurs only during `IP ID idle` scans, indicates that it was impossible to determine if the scanned port is closed or filtered |

## Discovering Open TCP Ports

- By default Nmap scans the top 1000 ports using the `TCP-SYN` scan (-sS), **only when we run it with root**
- Else TCP connect scan is performed (-sT)

### Scan Top Ports

```bash
sudo nmap 10.129.2.28 --top-ports=10 
```

## UDP Port Scan

- UDP is a stateless protocol, does not require a three-way handshake like TCP
- No acknowledgement, higher timeout

```bash
sudo nmap 10.129.2.28 -F -sU
```

---

See also: [[1. Enumeration]], [[2. Host Discovery]]
